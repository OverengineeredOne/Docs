<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Todo App - Overengineered Developer Guide</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Overengineered</a></li><li class="chapter-item expanded affix "><a href="preface.html">Preface</a></li><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="development-env.html"><strong aria-hidden="true">1.1.</strong> Development Environment</a></li><li class="chapter-item expanded "><a href="oecli.html"><strong aria-hidden="true">1.2.</strong> Overengineered CLI Tool</a></li></ol></li><li class="chapter-item expanded "><a href="web-assembly.html"><strong aria-hidden="true">2.</strong> WebAssembly</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="yew.html"><strong aria-hidden="true">2.1.</strong> Yew</a></li><li class="chapter-item expanded "><a href="component-library.html"><strong aria-hidden="true">2.2.</strong> Component Library</a></li><li class="chapter-item expanded "><a href="todo-app.html" class="active"><strong aria-hidden="true">2.3.</strong> Todo App</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Launch with Rocket</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Hosting a Yew App</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Adding GraphQL</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Packaging Rocket Server</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> Connecting to Docker</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Configuring the Cloud</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> Setting up the Master Node</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> Adding new nodes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> Persistant Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> Hosting with Kubectl</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> Converting to a Helm Chart</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.</strong> Deploy Rocket to Cloud with Flux</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Services</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Kubernetes Service Library</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Logging</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> WASI</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> Krustlet</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Graph Abstraction Layer</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> Nodes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.3.</strong> Edges</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.4.</strong> Search</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.5.</strong> Security</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.6.</strong> Privacy</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.7.</strong> GraphQL</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.8.</strong> Publishing</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Data Warehouse</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">9.1.</strong> Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.2.</strong> Data Pipelines</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Apps</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> Authentication</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Plugins</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.3.</strong> Hacking</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Multi Cloud</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">11.1.</strong> Google Cloud</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.2.</strong> AWS</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.3.</strong> Azure</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.4.</strong> Bare Metal Installation</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.5.</strong> High Availability Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.6.</strong> Scaling</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Overengineered Developer Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="todo-app"><a class="header" href="#todo-app">Todo App</a></h1>
<p>Now let's apply what we have covered so far and build something useful. We want something that
can be viewed on desktop mobile, and be feature rich.</p>
<p>Let's create a TODO app. As a user I should be able to create a todo and assign it to myself or
another person. TODO's are automatically generated for daily tasks, and some are triggered from an
external integration, such as Alexa. And we will create some automation to automatically cross off
our TODOs. We'll add additional features like notifications, change history, and some analytical
pages or dashboards.</p>
<h2 id="create-the-project"><a class="header" href="#create-the-project">Create the project</a></h2>
<p>We want to clone the patternfly-rs template. If you recall we can easily do this with the <code>pwa</code>
subcommand of <code>oecli</code>. Again make sure you are logged into github
<code>gh auth login --with-token &lt;token_file&gt;</code>.</p>
<pre><code class="language-rust ignore">oecli pwa --new todo-client
</code></pre>
<p>Now you can navigate into the new directory and try serving the page with trunk. <code>trunk serve</code>
and accessing with your browser as before.</p>
<h3 id="template"><a class="header" href="#template">Template</a></h3>
<p>The default template comes with all the code for the example page. We don't really care about it.
Inside the <code>./src</code> folder, we can delete everything but <code>main.rs</code> and <code>app.rs</code>. If we do this, we
can also get rid of all of the structs for Yew Routing. The only one we should care about is the
struts <code>Model</code></p>
<pre><code class="language-rust ignore">use patternfly_yew::*;
use yew::prelude::*;

pub struct Model {}

impl yew::Component for Model {
	type Message = ();
	type Properties = ();
	fn create(_: &amp;Context&lt;Self&gt;) -&gt; Self {
		Self {}
	}

	fn view(&amp;self, _: &amp;Context&lt;Self&gt;) -&gt; Html {
		&lt;&gt;

		&lt;/&gt;
	}
}

</code></pre>
<p>You may also notice this is not a function_component, you can go ahead and convert that on your
own.</p>
<h2 id="design"><a class="header" href="#design">Design</a></h2>
<p>Now that we have a blank page we will start simple. We want to have some text box for entering in
a todo and a button to submit. We'll also need to see a list of todos and some way to cross them
off. We'll stick with these features for this chapter.</p>
<p>Let's break down some of the components we'll be using.</p>
<h3 id="add-a-todo"><a class="header" href="#add-a-todo">Add a todo</a></h3>
<p>For the new TODO entry, a simple design would be to just place a text box and a button next to
each other.</p>
<pre><code class="language-txt ignore">+---------------------+ +--------+
|    Text Box         | | Submit |
+---------------------+ +--------+
</code></pre>
<p>We care about the text in the box and when the button is submitted we want to &quot;submit&quot; the data
that was entered into the text box.</p>
<p>What Patternfly Components would we need and how would we lay them out? Well we can find the
Button in the patternfly-rs documentation but nothing that really fits the text box. The upstream
Patternfly React documentation does have the
<a href="https://www.patternfly.org/v4/components/text-input">Text Input</a>. But ah, it does exist in
the
<a href="https://docs.rs/patternfly-yew/latest/patternfly_yew/struct.TextInput.html">patternfly-rs docs</a></p>
<p>Ok, now how would we place them next to each other? I'll let you take look at the layouts to find
out what works best: <a href="https://ctron.github.io/">patternfly-rs</a></p>
<p>Given this, let's see what our component should start to look like.</p>
<pre><code class="language-rust ignore">#[function_component(NewTodoBar)]
fn new_todo() -&gt; Html {
	html! {
		&lt;Split gutter=true&gt;
			&lt;SplitItem&gt;
				&lt;TextInput placeholder={ &quot;New TODO&quot; } /&gt;
			&lt;/SplitItem&gt;
			&lt;SplitItem&gt;
				&lt;Button
					disabled={false}
					label={ &quot;Create&quot; }
					variant={Variant::Primary}
				/&gt;
			&lt;/SplitItem&gt;
		&lt;/Split&gt;
	}
}
</code></pre>
<p>You can add this directly in the Model component and serve it to test it out.</p>
<pre><code class="language-rust ignore">impl yew::Component for Model {
...
	fn view(&amp;self, _:&amp;Context&lt;Self&gt;) -&gt; Html {
		html! {
			&lt;&gt;
				&lt;NewTodoBar /&gt;
			&lt;/&gt;
		}
	}
</code></pre>
<p>Looks much better than the counter example earlier.</p>
<p>... Breakdown component ...</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="component-library.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="component-library.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
