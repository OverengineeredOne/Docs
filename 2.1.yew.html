<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Yew - Overengineered Developer Guide</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Overengineered</a></li><li class="chapter-item expanded affix "><a href="preface.html">Preface</a></li><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="1.0.getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1.1.development-env.html"><strong aria-hidden="true">1.1.</strong> Development Environment</a></li><li class="chapter-item expanded "><a href="1.2.oecli.html"><strong aria-hidden="true">1.2.</strong> Overengineered CLI Tool</a></li></ol></li><li class="chapter-item expanded "><a href="2.0.web-assembly.html"><strong aria-hidden="true">2.</strong> WebAssembly</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="2.1.yew.html" class="active"><strong aria-hidden="true">2.1.</strong> Yew</a></li><li class="chapter-item expanded "><a href="2.2.component-library.html"><strong aria-hidden="true">2.2.</strong> Component Library</a></li><li class="chapter-item expanded "><a href="2.3.todo-app.html"><strong aria-hidden="true">2.3.</strong> Todo App</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Launch with Rocket</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Hosting a Yew App</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Adding GraphQL</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Containerized Environment</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> Packaging the Rocket server</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Configuring the Cloud</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> Setting up the Master Node</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> Adding new nodes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> Persistant Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> Hosting with Kubectl</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> Converting to a Helm Chart</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.</strong> Deploy Todo App to Cloud</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Apps</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Authentication</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Ecosystem</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> Plugins</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> Hacking</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.5.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Services</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> Kubernetes Service Library</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.2.</strong> Logging</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.3.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> WASI</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> Krustlet</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Graph Abstraction Layer</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">9.1.</strong> Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.2.</strong> Nodes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.3.</strong> Edges</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.4.</strong> Search</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.5.</strong> Security</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.6.</strong> Privacy</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.7.</strong> GraphQL</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.8.</strong> Publishing</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.9.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Data Warehouse</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Data Pipelines</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.3.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Multi Cloud</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">11.1.</strong> Google Cloud</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.2.</strong> AWS</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.3.</strong> Azure</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.4.</strong> Bare Metal Installation</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.5.</strong> High Availability Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.6.</strong> Scaling</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.7.</strong> Project n</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Overengineered Developer Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="yew"><a class="header" href="#yew">Yew</a></h1>
<p>Yew is a modern Rust framework for creating multi-threaded front-end web
applications with WebAssembly.</p>
<p>Like React, Yew is a component based framework which makes it easy to create
interactive UIs. Inside, Yew's performance is achieved by minimizing DOM calls
and offloading processing into background threads.</p>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>Let's take a look at how to build an example Yew app. If you are using the
Overengineered development environment we are good to go and can skip the next
step. If not, there are a couple of prerequisites you'll need to set up.</p>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h3>
<p><strong>This step is only required if you are not using the development
environment.</strong> You'll need to make sure you have the following tools and they
are up to date.</p>
<ul>
<li>Rust</li>
<li>trunk</li>
<li>Compile target wasm32-unknown-unknown</li>
</ul>
<p><em>You can reference earlier chapters for instructions on installing rust.</em></p>
<p>After Rust is installed, you can use Cargo to install <code>trunk</code>.</p>
<pre><code class="language-rust ignore">cargo install trunk
</code></pre>
<p>The compile target is covered later.</p>
<h3 id="setting-up-the-yew-project"><a class="header" href="#setting-up-the-yew-project">Setting up the Yew Project</a></h3>
<p>For this project, we will need to expose the port 8080 so we can load the page
in the browser later.</p>
<pre><code class="language-rust ignore">docker run -it -p 8080:8080 oedev /bin/bash
</code></pre>
<p>Here we are adding <code>-p 8080:8080</code> to the earlier command to launch the
development environment. We are telling Docker that we want port 8080 to be
opened inside container and we also want to map that to port 8080 on the host
computer.</p>
<p>Once your environment is relaunched with port 8080 mapped let's go ahead and
create our project.</p>
<pre><code class="language-rust ignore">cargo new example-yew-project
cd example-yew-project
</code></pre>
<p>And to verify everything works perform an initial run with Cargo (<code>cargo run</code>)
and you should see the expected Hello, World! example.</p>
<h2 id="building-a-web-page"><a class="header" href="#building-a-web-page">Building a web page</a></h2>
<p>The first thing we want to make sure we do is add the WASM (WebAssembly) build
target by running:</p>
<pre><code class="language-rust ignore">rustup target add wasm32-unknown-unknown
</code></pre>
<p>Now we can making some updates to our Cargo.toml file to add the new Yew
dependency.</p>
<pre><code class="language-rust ignore">[package]
name = &quot;example-yew-project&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;

[dependencies]
yew = &quot;0.19&quot;

</code></pre>
<p>Open up <code>src/main.rs</code> and create a simple component that renders the message
<code>Hello, World!</code>. I'll go ahead and show you what it looks like then, we'll
break it down.</p>
<pre><code class="language-rust ignore">use yew::prelude::*;

#[function_component(App)]
fn app() -&gt; Html {
    html! {
			&lt;h1&gt;{ &quot;Hello, World!&quot; }&lt;/h1&gt;
    }
}

fn main() {
    yew::start_app::&lt;App&gt;();
}
</code></pre>
<p>The <code>function_component()</code> macro creates a component, in this case with the
name <code>App</code>. Function components are a simplified components. They return a JSX
like syntax and this is exactly what is rendered.</p>
<p>A couple things to note about the html macro.</p>
<ul>
<li>Expressions can be used but must be wrapped in curly braces <code>{ }</code></li>
<li>There must only be one root node. You can wrap them in a fragment <code>&lt;&gt;&lt;/&gt;</code></li>
</ul>
<p>Before we can see what this looks like in the browser let's make sure we add
<code>index.html</code> to the root of the project. This is still a webpage and just like
in React, we still have to define a index.html to serve to the client.</p>
<pre><code class="language-rust ignore">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;&lt;/head&gt;
    &lt;body&gt;

    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>If you notice we don't add anything to the children of the body element. This
is because Yew will insert this data for us. Looking at the provided example
above, when <code>yew::start::&lt;App&gt;();</code> is ran it will replace the children of body
with the return value of <code>app()</code>.</p>
<h3 id="viewing-the-page"><a class="header" href="#viewing-the-page">Viewing the page</a></h3>
<p>During development we need to be able to view the changes as we develop. This
is where trunk comes in to help us. Run the following command to build and
serve the application.</p>
<pre><code class="language-rust ignore">trunk serve
</code></pre>
<p>From here you can navigate to your browser and try reaching the webpage with
the default IP Address. <code>http://172.17.0.1:8080</code></p>
<p>Congratulations, you've built your first Yew app!</p>
<h3 id="watching-changes"><a class="header" href="#watching-changes">Watching changes</a></h3>
<p>A big part of this development flow is being able to instantly see your changes
as your are developing. Today this is sadly not possible. The next steps before
we can get there are to install an ssh server on the docker image. Development
instructions will be updated to reflect changes to use a traditional ssh client
to connect to the dev environment. Instructions for tools like VSCode will be
added.</p>
<h3 id="hooks"><a class="header" href="#hooks">Hooks</a></h3>
<p>Hooks are Yew functions that allow you to tie into the lifecycle or state of a
component. We will take a look at
<a href="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">use_state</a>.</p>
<p><code>use_state</code> allows us to create and set a default value to be used within the
component. The <code>UseStateHandle</code> it returns has a method that allows us to
change the state value. This will in turn update the component.</p>
<p>Let's update our app method to test it out.</p>
<pre><code class="language-rust ignore">use yew::{Callback, function_component, html, use_state};

#[function_component(App)]
fn app() -&gt; Html {
    let counter = use_state(|| 0);
    let onclick = {
        let counter = counter.clone();
        Callback::from(move |_| counter.set(*counter + 1))
    };
    html! {
			&lt;div&gt;
				&lt;button {onclick}&gt;{ &quot;Add one&quot; }&lt;/button&gt;
				&lt;p&gt;{ &quot;Total: &quot; }{ *counter }&lt;/p&gt;
			&lt;/div&gt;
    }
}

</code></pre>
<p>You can see here we call <code>use_state()</code> and assign it to the variable <code>counter</code>.
We're also passing in a callback. This allows us to set a default the value. In
this case <code>0</code>.</p>
<p>We use <code>counter</code> two ways. One directly in the return value. We <code>dereference</code>
<code>counter</code> and display that as the &quot;total&quot; value.</p>
<p>The other is in the <code>onClick</code> <code>handle</code>. Inside this callback we clone the
reference and move it's ownship into the <code>Callback</code> struct. You can see
<code>onClick</code> being passed into the <code>&lt;button /&gt;</code>'s <code>props</code>. Yew will map the
onclick <code>HTMLEvent</code> to this <code>onClick</code> function you defined. When the &quot;Add One
Button&quot; is clicked you will see the <code>counter</code>'s value get set to <code>counter + 1</code>.</p>
<p>Go ahead and <code>trunk serve</code>. You can see as you click the button and test it out.</p>
<h3 id="further-reading"><a class="header" href="#further-reading">Further Reading</a></h3>
<p>We are only covering a very small introduction to Yew, just to get your feet
wet. I'll highly recommend following up with the Yew documentation.</p>
<ul>
<li><a href="https://yew.rs/docs/concepts/components/introduction">Components</a></li>
<li><a href="https://yew.rs/docs/concepts/html/introduction">HTML</a></li>
<li><a href="https://yew.rs/docs/concepts/function-components/introduction">Functional Components</a></li>
<li><a href="https://yew.rs/docs/concepts/agents/introduction">Agents</a></li>
<li><a href="https://yew.rs/docs/concepts/agents">Agents</a></li>
<li><a href="https://yew.rs/docs/concepts/context">Contexts</a></li>
<li><a href="https://yew.rs/docs/concepts/router">Router</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="2.0.web-assembly.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="2.2.component-library.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="2.0.web-assembly.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="2.2.component-library.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
