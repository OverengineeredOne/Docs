# Todo App

Now let's apply what we have covered so far and build something useful. We want
something that can be viewed on desktop mobile, and be feature rich.

Let's create a TODO app. As a user I should be able to create a todo and assign
it to myself or another person. TODOs are automatically generated for daily
tasks, and some are triggered from an external integration, such as Alexa.
And we will create some automation to automatically cross off our TODOs. We'll
add additional features like notifications, change history, and some analytical
pages or dashboards.

## Create the project

We want to clone the patternfly-rs template. If you recall we can easily do
this with the `pwa` subcommand of `oecli`. Again make sure you are logged into
github `gh auth login --with-token <token_file>`.

```rust,ignore
oecli pwa --new todo-client
```

Now you can navigate into the new directory and try serving the page with
trunk. `trunk serve` and accessing with your browser as before.

### Template

The default template comes with all the code for the example page. We don't
really care about it. Inside the `./src` folder, we can delete everything but
`main.rs` and `app.rs`. If we do this, we can also get rid of all of the
structs for Yew Routing. The only one we should care about is the struts `Model`

```rust,ignore
use patternfly_yew::*;
use yew::prelude::*;

pub struct Model {}

impl yew::Component for Model {
  type Message = ();
  type Properties = ();
  fn create(_: &Context<Self>) -> Self {
    Self {}
  }

  fn view(&self, _: &Context<Self>) -> Html {
    <>

    </>
  }
}

```

You may also notice this is not a function_component, you can go ahead and
convert that on your own.

## Design

Now that we have a blank page we will start simple. We want to have some text
box for entering in a todo and a button to submit. We'll also need to see a
list of todos and some way to cross them off. We'll stick with these features
for this chapter.

Let's break down some of the components we'll be using.

### Add a todo

For the new TODO entry, a simple design would be to just place a text box and a
button next to each other.

```txt,ignore
+---------------------+ +--------+
|    Text Box         | | Submit |
+---------------------+ +--------+
```

We care about the text in the box and when the button is submitted we want to
"submit" the data that was entered into the text box.

What Patternfly Components would we need and how would we lay them out? Well we
can find the Button in the patternfly-rs documentation but nothing that really
fits the text box. The upstream Patternfly React documentation does have the
[Text Input](https://www.patternfly.org/v4/components/text-input). But ah, it
does exist in the
[patternfly-rs docs](https://docs.rs/patternfly-yew/latest/patternfly_yew/struct.TextInput.html)

Ok, now how would we place them next to each other? I'll let you take look at
the layouts to find out what works best:
[patternfly-rs](https://ctron.github.io/)

Given this, let's see what our component should start to look like.

```rust,ignore
#[function_component(NewTodoBar)]
fn new_todo() -> Html {
  html! {
    <Split gutter=true>
      <SplitItem>
        <TextInput placeholder={ "New TODO" } />
      </SplitItem>
      <SplitItem>
        <Button
          disabled={false}
          label={ "Create" }
          variant={Variant::Primary}
        />
      </SplitItem>
    </Split>
  }
}
```

You can add this directly in the Model component and use `trunk serve` it to
test it out.

```rust,ignore
impl yew::Component for Model {
...
fn view(&self, _:&Context<Self>) -> Html {
  html! {
    <>
      <NewTodoBar />
    </>
  }
}
```

Looks much better than the counter example earlier, but we can still do better.
Let's find some layouts that might work for us. Our goal is to create something
like this.

```txt,ignore
+----------------------------------------+
| +------------------------------------+ |
| | +---------------------+ +--------+ | |
| | |    Text Box         | | Submit | | |
| | +---------------------+ +--------+ | |
| +------------------------------------+ |
|                                        |
| +------------------------------------+ |
| |                                    | |
| |                                    | |
| |                                    | |
| |                                    | |
| +------------------------------------+ |
+----------------------------------------+
```

Where the `NewTodoBar` component is centered within the parent component and
the `TextInput` fills the space up to the button. The parent component should
fill the width that's available and down to a minium of some value that looks
good on a mobile display.

There should be one additional parent that sets a max width. This component
should also pad the content. Other than the `NewTodoBar` there should be a
section to display the current TODOs. We'll use a `Card` as a placeholder for
now. All of this should be placed inside a layout.

## Layouts

In Patternfly there are seven different layouts to help compose your web app.
We can briefly cover each of them and what they are good for.

### Stack

A [stack](patternfly.org/v4/layouts/stack) will position items vertically in a
container. Optionally one item can be used to fill the remaining space. All
children will be padded and centered adding a nice border. By default the
components are crammed together but can add spacing between with the optional
gutter.

### Split

[Split](patternfly.org/v4/layouts/split) is pretty much exactly the same as
stack, but horizontally. This one also has the option of wrapping the children
into an extra row if it doesn't fit the width of the screen. When viewing the
example adjust the width of the browser and you can see how the components
wrap.

### Grid

[Grid](patternfly.org/v4/layouts/grid) is allows you to layout content on a
fixed-size 12 column grid. This makes the behavior predictable and divisible by
1/2, 1/3, 1/4, 1/6 evenly. You can construct children of any size.

Grid does have a responsive ordering features, which allows you change which
order they appear based on the current window size.

### Gallery

Like Grid, the [Gallery](patternfly.org/v4/layouts/gallery) will use a grid
like layout this time evenly placing the children. The view is response, so
depending on the screen size you can adjust the sizing of the children.

### Level

[Level](patternfly.org/v4/layouts/level) evenly distributes the children
horizontally within a container.

### Bullseye

The [Bullseye](patternfly.org/v4/layouts/bullseye) will center the content both
horizontally and vertically.

### Flex

The Flex layout allows you to build your own custom layouts that give you the
same look and feel as the other PatternFly components and layouts. This enables
developers to create a custom layout that can have consistent spacing and
change responsively with other PatternFly layouts and components.

- [Flex](patternfly.org/v4/layouts/flex)
