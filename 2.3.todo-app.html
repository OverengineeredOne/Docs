<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Todo App - Overengineered Developer Guide</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Overengineered</a></li><li class="chapter-item expanded affix "><a href="preface.html">Preface</a></li><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="1.0.getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1.1.development-env.html"><strong aria-hidden="true">1.1.</strong> Development Environment</a></li><li class="chapter-item expanded "><a href="1.2.oecli.html"><strong aria-hidden="true">1.2.</strong> Overengineered CLI Tool</a></li></ol></li><li class="chapter-item expanded "><a href="2.0.web-assembly.html"><strong aria-hidden="true">2.</strong> WebAssembly</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="2.1.yew.html"><strong aria-hidden="true">2.1.</strong> Yew</a></li><li class="chapter-item expanded "><a href="2.2.component-library.html"><strong aria-hidden="true">2.2.</strong> Component Library</a></li><li class="chapter-item expanded "><a href="2.3.todo-app.html" class="active"><strong aria-hidden="true">2.3.</strong> Todo App</a></li></ol></li><li class="chapter-item expanded "><a href="3.0.launching-with-rocket.html"><strong aria-hidden="true">3.</strong> Launch with Rocket</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="3.1.hosting-a-yew-app.html"><strong aria-hidden="true">3.1.</strong> Hosting a Yew App</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Adding GraphQL</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Containerized Environment</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> Packaging the Rocket server</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Configuring the Cloud</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> Setting up the Master Node</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> Adding new nodes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> Persistant Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> Hosting with Kubectl</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> Converting to a Helm Chart</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.</strong> Deploy Todo App to Cloud</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Apps</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Authentication</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Ecosystem</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> Plugins</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> Hacking</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.5.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Services</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> Kubernetes Service Library</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.2.</strong> Logging</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.3.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> WASI</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> Krustlet</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Graph Abstraction Layer</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">9.1.</strong> Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.2.</strong> Nodes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.3.</strong> Edges</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.4.</strong> Search</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.5.</strong> Security</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.6.</strong> Privacy</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.7.</strong> GraphQL</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.8.</strong> Publishing</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.9.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Data Warehouse</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Data Pipelines</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.3.</strong> Project n</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Multi Cloud</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">11.1.</strong> Google Cloud</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.2.</strong> AWS</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.3.</strong> Azure</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.4.</strong> Bare Metal Installation</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.5.</strong> High Availability Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.6.</strong> Scaling</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.7.</strong> Project n</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Overengineered Developer Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="todo-app"><a class="header" href="#todo-app">Todo App</a></h1>
<p>Now let's apply what we have covered so far and build something useful. We want
something that can be viewed on desktop, mobile, and be feature rich.</p>
<p>Let's create a TODO app. As a user I should be able to create a todo and assign
it to themselves or another person. TODOs are automatically generated for daily
tasks, and some are triggered from an external integration, such as Alexa.
And we will create some automation to automatically cross off our TODOs. We'll
add additional features like notifications, change history, and some analytical
pages or dashboards.</p>
<p>In this chapter, we will create a bare minimum application and expand on it in
further chapters.</p>
<h2 id="create-the-project"><a class="header" href="#create-the-project">Create the project</a></h2>
<p>To get started let's clone the patternfly-rs template. If you recall we can
easily do this with the <code>pwa</code> subcommand of <code>oecli</code>. Again make sure you are
logged into github <code>gh auth login --with-token &lt;token_file&gt;</code>.</p>
<pre><code class="language-rust ignore">oecli pwa --new todo-client
</code></pre>
<p>Now you can navigate into the new directory and try serving the page with
trunk. <code>trunk serve --address 0.0.0.0</code> and accessing with your browser as
before.</p>
<h3 id="template"><a class="header" href="#template">Template</a></h3>
<p>The default template comes with all the code for the PatternFly example page.
However, we don't really care about anything outside of main.rs. You can choose
keep all other files within the <code>./src</code> folder for reference, or you can delete
them. Ok, let's get started and prep <code>main.rs</code> by creating a new base
component.</p>
<pre><code class="language-rust ignore">use patternfly_yew::*;
use yew::prelude::*;

pub struct TodoPage {}

impl yew::Component for TodoPage {
  type Message = ();
  type Properties = ();

  fn create(_: &amp;Context&lt;Self&gt;) -&gt; Self {
    Self {}
  }

  fn view(&amp;self, _: &amp;Context&lt;Self&gt;) -&gt; Html {
    html! {
      &lt;Page&gt;

      &lt;/Page&gt;
    }
  }
}

pub fn main() -&gt; Result&lt;(), JsValue&gt; {
  wasm_logger::init(wasm_logger::Config::new(Level::Debug));
  yew::start_app::&lt;TodoPage&gt;();
  Ok(())
}

</code></pre>
<p>The top level component must be a struct component or you won't be able to call
<code>start_app()</code>. All other components can be <code>function_components</code>.</p>
<h2 id="design"><a class="header" href="#design">Design</a></h2>
<p>Now that we have a <code>Page</code> component with no children we want to have some text
box for entering in a todo and a button to submit. We'll also need to see a
list of todos and some way to cross them off. We'll stick with just these
features for this chapter.</p>
<p>Let's break down some of the components we'll be using.</p>
<h3 id="adding-a-todo"><a class="header" href="#adding-a-todo">Adding a todo</a></h3>
<p>For the new Todo entry, a simple design would be to just place a text box and a
button next to each other.</p>
<pre><code class="language-txt ignore">+---------------------+ +--------+
|    Text Box         | | Submit |
+---------------------+ +--------+
</code></pre>
<p>What Patternfly Components would we need and how would we lay them out? Well we
can find the Button in the patternfly-rs documentation but nothing that really
fits the text box. The upstream Patternfly React documentation does have the
<a href="https://www.patternfly.org/v4/components/text-input">Text Input</a>. But ah, it
does exist in the
<a href="https://docs.rs/patternfly-yew/latest/patternfly_yew/struct.TextInput.html">patternfly-rs docs</a></p>
<p>Ok, now how would we place them next to each other? I'll let you take look at
the layouts to find out what works best:
<a href="https://ctron.github.io/">patternfly-rs</a></p>
<p>Given this, let's see what our component should start to look like.</p>
<pre><code class="language-rust ignore">#[function_component(NewTodoBar)]
fn new_todo() -&gt; Html {
  html! {
    &lt;Split&gt;
      &lt;SplitItem&gt;
        &lt;TextInput placeholder={ &quot;New TODO&quot; } /&gt;
      &lt;/SplitItem&gt;
      &lt;SplitItem&gt;
        &lt;Button
          disabled=false
          label={ &quot;Create&quot; }
          variant={ Variant::Primary }
        /&gt;
      &lt;/SplitItem&gt;
    &lt;/Split&gt;
  }
}
</code></pre>
<p>Looking at the <code>Props</code> we are passing into the <code>TextInput</code> we are passing &quot;New
TODO&quot; into the placeholder. You can check the bottom of the documentation page
or the rust docs for more information on what it does.</p>
<p>Now just add this to a <code>PageSection</code> directly in the <code>TodoPage</code> component and
use serve the page to test it out.</p>
<pre><code class="language-rust ignore">impl yew::Component for TodoPage {

...

fn view(&amp;self, _: &amp;Context&lt;Self&gt;) -&gt; Html {
  html! {
    &lt;Page&gt;
      &lt;PageSection&gt;
        &lt;NewTodoBar /&gt;
      &lt;/PageSection&gt;
    &lt;/Page&gt;
  }
}
</code></pre>
<p>You may notice that the text box and button are squished together and doesn't
have the nice padding between them. We can quickly fix this by making sure we
are using the proper props on the <code>Split</code> and <code>SplitItem</code> layouts.</p>
<pre><code class="language-rust ignore">#[function_component(NewTodoBar)]
fn new_todo() -&gt; Html {
  html! {
    &lt;Split gutter=true&gt;
      &lt;SplitItem fill=true&gt;
        &lt;TextInput placeholder={ &quot;New TODO&quot; } /&gt;
      &lt;/SplitItem&gt;
      &lt;SplitItem&gt;
        &lt;Button
          disabled=false
          label={ &quot;Create&quot; }
          variant={ Variant::Primary }
        /&gt;
      &lt;/SplitItem&gt;
    &lt;/Split&gt;
  }
}
</code></pre>
<p>The <code>Split</code> component has the gutter prop which will add the padding between
them. We are also telling the <code>TextInputs</code> parent component to fill up the
remaining space.</p>
<p>Now this is looking much better than the counter example earlier, but we can
still do better. Let's find some more layouts that might work for displaying
the active todos beneath the <code>NewTodoBar</code> with some padding. Our goal is to
create something like this.</p>
<pre><code class="language-txt ignore">+----------------------------------------+
| +------------------------------------+ |
| | +---------------------+ +--------+ | |
| | |    Text Box         | | Submit | | |
| | +---------------------+ +--------+ | |
| +------------------------------------+ |
|                                        |
| +------------------------------------+ |
| | Take out the trash               X | |
| | Make the bed                     X | |
| |                                    | |
| |                                    | |
| |                                    | |
| +------------------------------------+ |
+----------------------------------------+
</code></pre>
<p>So let's create a new component to represent the section below the
<code>NewTodoBar</code>. We can create a nice visual block for the <code>TodoList</code> with a
<code>Card</code> component. And to create the vertical list, we can use the <code>Stack</code>
component.</p>
<pre><code class="language-rust ignore">#[function_component(TodoList)]
pub fn todo_list() -&gt; Html {
  html! {
    &lt;Card&gt;
      &lt;Stack&gt;
      &lt;/Stack&gt;
    &lt;/Card&gt;
  }
}
</code></pre>
<p>Now to create a <code>TodoListItem</code> component to represent an individual Todo. This
component should look almost identical to the <code>NewTodoBar</code> with the exception
that the button would only render an icon.</p>
<pre><code class="language-rust ignore">#[function_component(TodoListItem)]
pub fn todo_list_item() -&gt; Html {
  html! {
    &lt;Split gutter=true&gt;
      &lt;SplitItem fill=true&gt;
        &lt;Text&gt;
          { &quot;Placeholder&quot; }
        &lt;/Text&gt;
      &lt;/SplitItem&gt;
      &lt;SplitItem&gt;
        &lt;Button&gt;
          icon={Icon::MinusCircleIcon}
          variant={Variant::Plain}
        /&gt;
      &lt;/SplitItem&gt;
    &lt;/Split&gt;
  }
}
</code></pre>
<p>Finally simply pass in one or two <code>TodoListItems</code> to the <code>TodoList</code> and take a
look.</p>
<pre><code class="language-rust ignore">#[function_component(TodoList)]
pub fn todo_list() -&gt; Html {
  html! {
    &lt;Card&gt;
      &lt;Stack&gt;
        &lt;TodoListItem /&gt;
        &lt;TodoListItem /&gt;
      &lt;/Stack&gt;
    &lt;/Card&gt;
  }
}
</code></pre>
<p>This looks great, but if you tried to submit nothing actually happens. This is
where we need to introduce state and callbacks to help manage this. We'll let
our top level component <code>TodoPage</code> store the todos. This chapter, we'll keep
the todo's stored as a <code>Vec</code> of <code>Strings</code>.</p>
<pre><code class="language-rust ignore">
pub enum Msg {
  Submit(String),
  Close(usize),
}

pub struct TodoPage {
  todos: Vec&lt;String&gt;,
}

impl yew::Component for TodoPage {

...

  fn create(_: &amp;Context&lt;Self&gt;) -&gt; Self {
    Self { todos: vec![] }
  }

  fun update(&amp;mut self, _ctx: &amp;Context&lt;Self&gt;, msg: Self::Msg) -&gt; bool {
    match msg {
      Msg::Submit(value) =&gt; {
        self.todos.push(value);
      }
      Msg::Close(idx) =&gt; {
        self.todos.remove(idx);
      }
    }
    true
  }

...

</code></pre>
<p>Now let's use the borrowed reference of <code>Context&lt;TodoPage&gt;</code> to create the call
backs and pass them down the tree.</p>
<pre><code class="language-rust ignore">...

  fn view(&amp;self, ctx: &amp;Context&lt;Self&gt;) -&gt; Html {
    Html! {
      &lt;Page&gt;
        &lt;PageSection&gt;
          &lt;NewTodoBar
            onsubmit={ctx.link().callback(|value: String| Msg::Submit(value)}
          /&gt;
        &lt;/PageSection&gt;
        &lt;PageSection&gt;
          &lt;TodoList
            onclose={ctx.link().callback(|idx: usize| Msg::Close(idx)}
            todos={self.todos.clone()}
          /&gt;
        &lt;/PageSection&gt;
      &lt;/Page&gt;
    }
  }
</code></pre>
<p>We added these new props, but they don't actually exist on each component yet.
Let's make sure we add those.</p>
<pre><code class="language-rust ignore">#[derive(Clone, Properties, PartialEq)]
pub struct NewTodoProps {
  pub onsubmit: Callback&lt;String&gt;
}

#[function_component(NewTodoBar)]
pub fn new_todo(props: &amp;NewTodoProps) -&gt; Html {
  let text: UseStateHandle&lt;String&gt; = use_state(|| &quot;&quot;.to_string());
  let on_text_change = {
    let text = text.clone();
    Callback::from(move |value: String| text.set(value.clone()))
  };
  let cb = props.onsubmit.clone();
  let onsubmit = {
    let text = text.clone();
    Callback::from(move |_| {
      cb.emit((*text).clone());
      text.set(&quot;&quot;.to_string());
    })
  };

  html! {
    &lt;Split gutter=true&gt;
      &lt;SplitItem fill=true&gt;
        &lt;TextInput
          placeholder={ &quot;New TODO Title&quot; }
          onchange={on_text_change}
          r#type={ &quot;text&quot; }
          value={(*text).clone()}
        /&gt;
      &lt;/SplitItem&gt;
      &lt;SplitItem fill=true&gt;
        &lt;Button
          disabled=false
          label={ &quot;Create&quot; }
          onclick={onsubmit}
          variant={Variant::Primary}
        /&gt;
      &lt;/SplitItem&gt;
    &lt;/Split&gt;
  }
}
</code></pre>
<p>Now we can update the <code>TodoList</code> with the new <code>Props</code> and use an iterator for
each of the StackItems.</p>
<pre><code class="language-rust ignore">#[derive(Clone, Properties, PartialEq)]
pub struct TodoListProps {
  pub onclose: Callback&lt;usize&gt;,
  pub todos: Vec&lt;String&gt;,
}

#[function_component(TodoList)]
pub fn todo_list(props: TodoListProps) -&gt; Html {
  html! {
    &lt;Card&gt;
      &lt;Stack&gt;
        {props.todos.iter().enumerate().map(|(idx, todo)| {
          html! {
            &lt;StackItem&gt;
              &lt;TodoListItem
                onclose={props.onclose.clone()}
                todo={todo.to_owned()}
                {idx}
              /&gt;
            &lt;/StackItem&gt;
          }
        }).collect::&lt;Html&gt;()}
      &lt;/Stack&gt;
    &lt;/Card&gt;
  }
}
</code></pre>
<p>And finally the last component to update is the <code>TodoListItem</code>.</p>
<pre><code class="language-rust ignore">#[derive(Clone, Properties, PartialEq)]
pub struct TodoListItemProps {
  pub idx: usize,
  pub onclose: Callback&lt;usize&gt;,
  pub todo: String,
}

#[function_component(TodoListItem)]
pub fn todo_list_item(props: &amp;TodoListItemProps) -&gt; Html {
  let TodoListItemProps { idx, onclose, todo } = props;
  let close_cb = onclose.clone();
  let close = {
    let idx = idx.clone();
    Callback::from(move |_| close_cb.emit(idx.clone())
  };

  html! {
    &lt;Split gutter=true&gt;
      &lt;SplitItem fill=true&gt;
        &lt;Text&gt;
          { todo.clone() }
        &lt;/Text&gt;
      &lt;/SplitItem&gt;
      &lt;SplitItem&gt;
        &lt;Button&gt;
          icon={Icon::MinusCircleIcon}
          onclick={close}
          variant={Variant::Plain}
        /&gt;
      &lt;/SplitItem&gt;
    &lt;/Split&gt;
  }
}
</code></pre>
<p>Congratulations, now when we head to the browser and check it out, we'll be
able to type in text and click the submit button. The text will be cleared and
we'll have a working list below. Any time you click the minus symbol it will
delete the TODO.</p>
<p>In the next set of chapters we'll take a look at different ways to host a yew
app other than Trunk. Between now and then I'd recommend cleaning up the code
and taking a look at the provided <a href="">example</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="2.2.component-library.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="3.0.launching-with-rocket.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="2.2.component-library.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="3.0.launching-with-rocket.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
