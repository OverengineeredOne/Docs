<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Overengineered Developer Guide</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Overengineered</a></li><li class="chapter-item expanded affix "><a href="preface.html">Preface</a></li><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="development-env.html"><strong aria-hidden="true">1.1.</strong> Development Environment</a></li><li class="chapter-item expanded "><a href="oecli.html"><strong aria-hidden="true">1.2.</strong> Overengineered CLI Tool</a></li></ol></li><li class="chapter-item expanded "><a href="web-assembly.html"><strong aria-hidden="true">2.</strong> WebAssembly</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="yew.html"><strong aria-hidden="true">2.1.</strong> Yew</a></li><li class="chapter-item expanded "><a href="component-library.html"><strong aria-hidden="true">2.2.</strong> Component Library</a></li><li class="chapter-item expanded "><a href="todo-app.html"><strong aria-hidden="true">2.3.</strong> Todo App</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Launch with Rocket</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Hosting a Yew App</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Adding GraphQL</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Packaging Rocket Server</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> Connecting to Docker</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Configuring the Cloud</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> Setting up the Master Node</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> Adding new nodes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> Persistant Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> Hosting with Kubectl</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> Converting to a Helm Chart</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.</strong> Deploy Rocket to Cloud with Flux</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Services</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Kubernetes Service Library</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Logging</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> WASI</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> Krustlet</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Graph Abstraction Layer</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> Nodes</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.3.</strong> Edges</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.4.</strong> Search</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.5.</strong> Security</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.6.</strong> Privacy</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.7.</strong> GraphQL</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.8.</strong> Publishing</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Data Warehouse</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">9.1.</strong> Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.2.</strong> Data Pipelines</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Apps</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> Authentication</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Plugins</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.3.</strong> Hacking</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Multi Cloud</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">11.1.</strong> Google Cloud</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.2.</strong> AWS</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.3.</strong> Azure</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.4.</strong> Bare Metal Installation</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.5.</strong> High Availability Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.6.</strong> Scaling</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Overengineered Developer Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="overengineered"><a class="header" href="#overengineered">Overengineered</a></h1>
<p><em>by Sean O'Rourke, ...</em></p>
<p>Welcome to Overengineered's Developer Guide! This text assumes you have an understanding of 
programming and programming concepts.</p>
<p>A good portion of the tech stack is in Rust. Though this text does not require you to have a
strong Rust background, you should be familiar with the 
<a href="https://doc.rust-lang.org/book/title-page.html">Rust Book</a>. If you haven't read it, don't fret,
everything's shiny. If you have experience with Python or JavaScript and React, it's well written 
and not difficult to get through.</p>
<p>In this text we'll learn a little bit about the platforms and services we support and use, then 
take a journey through concepts of Web 3.0 and how we are approaching this effort. Finally we'll
take a deep dive into the features and tools we've built and curated to accelerate development in
this new environment.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="preface"><a class="header" href="#preface">Preface</a></h1>
<p>Before we get begin I wanted to give you a little background on Overengineered and some of the 
original problems I set out to solve. Hopefully this will help set the direction and tone of this
book.</p>
<p>First, why Overengineered and what does the name mean? We'll it embodies the spirit of <em>&quot;I'll 
spend four hours automating this task that only takes me five minutes to complete.&quot;</em> Now what 
defines our platform and vision is a little more complicated. It mainly derives from a few 
different things inspired by my career.</p>
<p>I've worked within a large tech company for the last ten years solving problems of various scale. 
My strength has always been solving problems that drastically increase operational and development
efficiency. Within a company like this we're often highly well tuned engines. Software 
engineering, data science, data engineering, production engineering, user research, language,
content design, and many others all working efficiency to identify and tackle these problems. We 
prioritize and eleminate cognitive and physical manual work. This essentially allows entire 
organizations to maintain minimal budget increases year over year as the number of end users 
within their products scale to billions of users.</p>
<p>Applying this same discipline to my personal projects, where I attempt to have direct impact in my 
day to day has always been a challenge. Whether it be household budgeting, time spent on daily 
errands, and chores. The scope of solving some of these problems is substantial. It's unfortunate 
that I have not come across a solution to having all the readily building blocks to hack a project
within a weekend. I end up burning a significant amount of calories planning, budgeting materials,
setting up my infrastructure, writing the glue code between services or devices.</p>
<p>More often than not I end up in a debate with myself if I should use a cloud service or spend the 
extra effort to build solution.</p>
<p>The other driving factors that influence Overengineered is the general populations sentiment 
towards technology companies and tech today. To me, the driving factor of this seems to be trust. 
People want their data secure, protected, private, and available. The industry seems to be leaning 
toward blockchain to attempt to solve problem. It is a great tool and has a purpose, but in my 
opinion is generally to expensive and slow to be used everywhere.</p>
<p>So, I asked myself, why not bring the cloud infrastructure home? Make it as easy as Installing an
operating system. Adding a new computer or device is as easy as scanning a QR code. This is 
prefect for processing sensitive and private data such as facial recognition on security cameras. 
As well as tracking individuals throughout the house to apply individualized home automation and
contextual interaction with IoT devices. </p>
<p>If we are hosting our own trusted infrastructure, we still want to be able to create 
innerconnected and social experinces. This is where we can build a data service and abstraction 
layer, including public registry support to download and managing data schemas.</p>
<p>Progressive web apps can connect to any one or more hosted data service and in the event the 
server does not have the required dependencies, they can be fetched from one of the avalible 
registries. This public and transparent data model approach has the added benefit of creating a 
large data graph. Other abstractions can be made on top to provide a federated learning platform. </p>
<p>Not only could this enrich the value of user data to something beyond whats easily attainable 
today. But gives the true owner of the data power and the ability to monetize their own anonymized
data in a safe and secure manor.</p>
<p>This defines our north stars or what I hope to achieve. This is a long term vision and much of 
this will inevitably change. Thank you for reading, and enjoy. :)</p>
<p>-- Sean O'Rourke</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Overengineered is here to help you develop fast, efficient, and safe decentralized apps. We 
accomplish this by providing an easy to install <em>cloud at home</em>, where decentralized services can 
be installed like an app on your phone.</p>
<p>A GraphQL <em>data abstraction service</em> and decentralized <em>registries</em> are provided to help
distribute data schemas. Progressive Web Apps provide requirements to the abstraction service that
can then be fetched and installed from the registry.</p>
<p>This should enable developers to move quickly to implement new products and features. We also
want to provide all the glue needed to develop within this environment in a cohesive manor.</p>
<h2 id="rust"><a class="header" href="#rust">Rust</a></h2>
<p>In the spirit of trying to create a safe and secure platform that treats data ownership as a first
class feature; Rust feels like a natural fit. </p>
<p>Note that the current state of many of the dependencies are not considered stable. Therefore our 
platform will not be considered stable or support backwards compatability between versions. These 
guarantees will likely evolve over time, but for now expect rapid breaking changes.</p>
<h2 id="who-is-this-book-for"><a class="header" href="#who-is-this-book-for">Who is this book for?</a></h2>
<p>This book has no expectations on the audience's background. It is ideal for any developer who 
wants to quickly deliver decentralized apps or who are just to see how this landscape is changing 
with the next generation of the internet. </p>
<h2 id="how-to-use-this-book"><a class="header" href="#how-to-use-this-book">How to use this book.</a></h2>
<p>We try to structure the book so you get introduced to a new topic with a little background before 
moving into our solution to solving particular challenges. Finally we'll include additional 
information for followup reading and often a project.</p>
<p>Thoughout the book we'll be developing and breaking down a simple todo app, where we slowly 
introduce more and more features as we shape it to solve real world challenges.</p>
<p>We will be covering a broad range of topics, which will all require their own set of dependencies.
To make sure, as a reader, you can follow allong, we have developed tools to manage the 
dependencies in a secure environment. </p>
<h2 id="source-code"><a class="header" href="#source-code">Source Code</a></h2>
<p>The source files from this book can be found in the github repo 
<a href="https://github.com/overengineered/docs">GitHub</a> and will be found under the folder following the 
pattern of <code>booktitle-chapter-section-title</code>.</p>
<h2 id="stack"><a class="header" href="#stack">Stack</a></h2>
<p>Briefly let's cover the stack that we will be working with. Later we'll have a gentle introduction 
to many of them and others may not require direct interaction with, but it may be important to 
know later.</p>
<p>You can follow up to learn more about these at anytime.</p>
<h3 id="frontend"><a class="header" href="#frontend">Frontend</a></h3>
<p>The frontend is what the user sees when they load a web page or views one of apps using 
Overengineered. Web being the dominate platform today, we choose a lot of our decicions around 
that. WebAssembly is how we are able to create apps that support a wide range of architecture and
devices.</p>
<ul>
<li><strong>Yew</strong> - Yew is a Rust Crate similar to <a href="https://reactjs.org/">React</a>. They both use a virtual
dom, return a JSX like syntax and have both a class and functional implementation with hook like 
state and lifecycle management.</li>
<li><strong>GraphQL</strong> - <a href="https://graphql.org/">GraphQL</a> was chosen as the primary server / client 
interaction to minimize network traffic. With the ever growing number of devices we want to keep 
payloads as small as possible.  GraphQL provides a very nice abstraction for developers and has 
existing client libraries for many languages including Rust.</li>
</ul>
<h3 id="backend"><a class="header" href="#backend">Backend</a></h3>
<p>All of the services that need to run to keep the lights running and the apps working.</p>
<h4 id="webserver"><a class="header" href="#webserver">Webserver</a></h4>
<ul>
<li><strong>Rocket</strong> - <a href="https://rocket.rs/">Rocket</a> is the primary recommended way to create a user facing
web server. Rocket is a Rust Crate that focuses on a great developer experience with an easy to 
use API. We think this fits perfectly with what we are trying to accomplish.</li>
<li><strong>GraphQL</strong> - Like previously mentioned for various reasons we use GraphQL. GraphQL is very easy 
to integrate with Rocket.</li>
</ul>
<h3 id="devops"><a class="header" href="#devops">DevOps</a></h3>
<p>These cover the infrastructure that the cloud at home services use to manage and deploy the apps 
used for the cloud apps as well as the development environments. Don't worry most of this will 
soon be abstracted away and will not require expertise in. We will cover enough information to 
be able to unblock yourself in the case of an issue or unforseen problem.</p>
<ul>
<li><strong>Docker</strong> - We primarily use <a href="https://docker.com/">Docker</a> for the build tools, but primarily 
use <a href="https://containerd.io/">Containard</a> for the container service.</li>
<li><strong>Kubernetes</strong> - <a href="https://kubernetes.io/">Kubernetes</a> is a container orchestration service to 
manage containers across all devices within your network. We specifically use 
<a href="https://k3s.io/">k3s</a> since it supports the arm architecture and can easily be ran on Raspberry 
Pi to enable low cost hardware and low power consumption.</li>
<li><strong>Template Cluster K3s</strong> - An <a href="https://github.com/k8s-at-home/template-cluster-k3s">opinionated</a>
template for deploying a single k3s cluster.
<ul>
<li><strong>Ansible</strong> - <a href="https://ansible.com/">Ansible</a> is an automation platform for managing 
automation across devices.</li>
<li><strong>Terraform</strong> - <a href="https://terraform.io/">Terraform</a> provides infrastructure as code. We 
use it for managing the Cloudflare domain.</li>
<li><strong>Flux</strong> - <a href="https://fluxcd.io/docs/">Flux</a> is a tool for keeping the Kubernetes cluster 
in sync with the code repository.</li>
<li><strong>SOPS</strong> - <a href="https://github.com/mozilla/sops">SOPS</a> is a tool for managing private data 
such as passwords and private information within the configuration files that will be 
checked int source control.</li>
<li><strong>Cloudflare</strong> - <a href="https://cloudflare.com/">Cloudflare</a> manages domain and updates the 
DNS.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<p>Let's get started! We'll start by installing all the prerequisites then dive into the fundamental 
pieces of Overengineered.</p>
<p>To ensure rapid development we want to minimize the setup times for your development environment 
and tools. We accomplish this by utilizing docker and in the future will provide a web based 
environment. We will go into more detail in the following chapters, but for now know, Our image 
has Ubuntu as the base image. Also comes with all the tools preinstalled to follow along with the
book.</p>
<h2 id="installing-docker"><a class="header" href="#installing-docker">Installing Docker</a></h2>
<h3 id="ubuntu-and-debian-based-os-including-raspberry-pi"><a class="header" href="#ubuntu-and-debian-based-os-including-raspberry-pi">Ubuntu and Debian based OS including Raspberry Pi</a></h3>
<p>You can find install instructions for ubuntu at 
<a href="https://docs.docker.com/engine/install/ubuntu/">docs.docker.com</a>. To make tihs process even 
easier We've created a convenience script to get you set up with docker quickly. Go ahead and copy 
paste this into your terminal.</p>
<pre><code class="language-rust ignore">wget -O - https://raw.githubusercontent.com/OverengineeredOne/easy-docker-setup/main/debian.sh | bash
</code></pre>
<p>If you find any issues with the script, please, fill out an issue on 
<a href="https://github.com/OverengineeredOne/easy-docker-setup">github</a></p>
<h4 id="set-up-overengineered"><a class="header" href="#set-up-overengineered">Set up Overengineered</a></h4>
<p>Everything's shiny captain, a development environment doesn't exist yet. If you read a head you 
can build the current state from the source.</p>
<h3 id="mac-os-x"><a class="header" href="#mac-os-x">Mac Os X</a></h3>
<h3 id="windows"><a class="header" href="#windows">Windows</a></h3>
<h2 id="building-from-source"><a class="header" href="#building-from-source">Building from source</a></h2>
<p>Since the entire development environment is a container image, we can download the source from 
github and build it our selves.</p>
<p>For this we'll need to make sure we have git installed.</p>
<pre><code class="language-rust ignore">apt install git-all
</code></pre>
<p>Next clone the repository and navigate into the new directory.</p>
<pre><code class="language-rust ignore">git clone https://github.com/OverengineeredOne/oedev.git &amp;&amp; cd oedev
</code></pre>
<p>Finally just build the image! This part may take some time.</p>
<pre><code class="language-rust ignore">docker build -t oedev .
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="development-environment"><a class="header" href="#development-environment">Development Environment</a></h1>
<p>Overengineered has a very opinionated full stack environment. To make the installation of all the 
dependencies and tools hassle free, we created a Docker image that has all of these prepackaged 
for convenience.</p>
<p>If you are not familiar with Docker, it is a quick and secure way to package applications 
consistently and just work. Docker is similar to a virtual operating system were it only shares 
the kernel with the underlying system. It provides a declarative interface to compose images and 
can be published onto repositories. This makes it easy to share, not just code, but all the 
requirements including the environment.</p>
<p>Once the images are created, they can be cold started extremly quickly which is what we want.</p>
<h2 id="launching-the-environment"><a class="header" href="#launching-the-environment">Launching the environment</a></h2>
<p>Once Docker is installed and the image is built. You can start the image and jump into a bash 
session with the container with this command.</p>
<pre><code class="language-rust ignore">docker run -it oedev /bin/bash
</code></pre>
<p>In this case the <code>i</code> flag is indicating that we want to open an interactive SSH session to the 
container. The <code>t</code> flag allows to run commands interactively.</p>
<p>After the command is run the Docker container should boot up quickly. As soon as it is booted a 
ssh session should kick in and connect you to the container.</p>
<h2 id="setting-up"><a class="header" href="#setting-up">Setting up</a></h2>
<p>Once your successfully connected, we'll need to set up a few things before we get too deep in. 
Overengineered uses Github for our code repository and we will be setting up several repositories
throughout this book.</p>
<h3 id="github-cli-gh"><a class="header" href="#github-cli-gh">Github CLI (gh)</a></h3>
<p>The Github CLI is already shipped with the Docker image. Let's start by logging in. This process 
is simple, we just need to run one command. But first let's grab a personal access token. 
Instructions can be found at the 
<a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">github docs</a>.</p>
<p>At the time of writing, You can find it under the developer settings.</p>
<ul>
<li>Upper-right corner of any page, click profile photo and settings.</li>
<li>In the left bar click Developer settings.</li>
<li>In the left sidebar click, Personal access tokens.</li>
<li>Click Generate new token.</li>
<li>Fill out the details and click generate.</li>
<li>Make sure you copy the token.</li>
</ul>
<p>Now from the SSH session we established with the Docker container we setup earlier run the command
to login replacing &lt;your_token&gt; with the token we copied in the previous step.</p>
<pre><code class="language-rust ignore">gh auth login --with-token &lt;your_token&gt;
</code></pre>
<h2 id="stopping-the-container"><a class="header" href="#stopping-the-container">Stopping the container</a></h2>
<p>There is no persistent data in this development environment. As soon as the container is no longer
running all modified files will be gone forever. There are a couple ways to deal with this, you 
can use source control or a remote home directory. (<em>Currently not supported</em>)</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-line-interface"><a class="header" href="#command-line-interface">Command Line Interface</a></h1>
<p>The development environment ships with a command line tool to help take care of a lot of the 
boilerplate and configuration within Overengineered.</p>
<p>This tool is not meant to replace existing command line tools, but address common tasks such as, 
setting up a new cloud, set up a new progressive web app, setting up boilerplate templates,
installing, and uploading apps to repositories.</p>
<p>If you are using the Overengineered Development Environment the CLI comes preinstalled and can be 
accessed with <code>oecli</code>.</p>
<p>For more details on the specific command line options that are available you can use the help 
section.</p>
<pre><code class="language-rust ignore">oecli --help
</code></pre>
<h3 id="manual-installation"><a class="header" href="#manual-installation">Manual Installation</a></h3>
<p>If you are not within the Overengineered dev environment you can install <code>oecli</code> through Cargo.</p>
<pre><code class="language-rust ignore">cargo install oecli
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="webassembly"><a class="header" href="#webassembly">WebAssembly</a></h1>
<p>At the time of writing WebAssembly is sill new and is already gaining steam as the next big player 
in web development.</p>
<h2 id="what-is-webassembly"><a class="header" href="#what-is-webassembly">What is WebAssembly?</a></h2>
<p>I'll never do as good as a job as 
<a href="https://www.youtube.com/watch?v=HktWin_LPf4">Lin Clark's A Cartoon Intro to WebAssembly</a>, but
I'll take a crack at it.</p>
<p>WebAssembly solves the problem to allow applications built to be used in the browser, written
in languages other than Javascript. In our case, we will be using Rust and compiling to the low 
level target, WebAssembly. This allows applications to run, without installation and provide 
native performance.</p>
<h2 id="background"><a class="header" href="#background">Background</a></h2>
<p>Javascript was created back in 1995 and was the only way to interact with the DOM and manipulate 
HTML. Overall JS performance is fairly poor, until the introduction of just in time compilers, 
which drastically increased performance and interactivity into what it is today.</p>
<h2 id="the-future-of-webassembly"><a class="header" href="#the-future-of-webassembly">The future of WebAssembly</a></h2>
<p>Like I mentioned WebAssembly is still new, for example today there is a lot of JS interopt. As 
data is passed around it's serialzed / deserialized. Today this is a big performance bottleneck. 
In the future as proposals get written into the WebAssembly standard, such as direct DOM access.</p>
<h2 id="wasi-and-beyond"><a class="header" href="#wasi-and-beyond">WASI and beyond</a></h2>
<p>WASI is exciting since it brings WebAssembly to the backend. This is exciting for a few reasons,
every WASI module runs in it's secure environment, interfaces allow for easy interopt between
languages that compile to the same target, and finally cold start times are nearly instantanous.
Drastically quicker than Docker, which is already quick.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="yew"><a class="header" href="#yew">Yew</a></h1>
<p>Yew is a modern Rust framework for creating multi-threaded front-end web applications with 
WebAssembly.</p>
<p>Like React Yew is a component based framework which makes it easy to create interactive UIs. 
Performance is acheived by minimizing DOM calls and offloading proccing into background threads.</p>
<h2 id="intoduction"><a class="header" href="#intoduction">Intoduction</a></h2>
<p>Let's take a look at how to build an example Yew app. If you are using the Overengineered 
development environment we are good to go and can skip the next step. If not there are a couple of
prerequisites you'll need to set up.</p>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites.</a></h3>
<p>You'll need to make sure you have the following tools up to date.</p>
<ul>
<li>Rust</li>
<li>trunk</li>
<li>Compile target wasm32-unknown-unknown</li>
</ul>
<p>You can check out earlier chapters for instructions on installing rust.</p>
<p>After Rust is installed, you can use Cargo to install <code>trunk</code> by running:</p>
<pre><code class="language-rust ignore">cargo install trunk
</code></pre>
<h3 id="setting-up-the-yew-project"><a class="header" href="#setting-up-the-yew-project">Setting up the Yew Project</a></h3>
<p>For this project, we will need to expose the port 8080 so we can load the page in the browser 
later. Make sure you add the extra argument when launching the development environment.</p>
<pre><code class="language-rust ignore">docker run -it -p 8080:8080 oedev /bin/bash
</code></pre>
<p>Once connected let's go ahead and create our project.</p>
<pre><code class="language-rust ignore">cargo new example-yew-project
cd example-yew-project
</code></pre>
<p>And to veryify everything works perform an intital build with Cargo and you should see the 
expected Hello, World! example.</p>
<h2 id="building-a-web-page"><a class="header" href="#building-a-web-page">Building a web page</a></h2>
<p>The first thing we want to make sure we do is add the WASM build target by running: </p>
<pre><code class="language-rust ignore">rustup target add wasm32-unknown-unknown
</code></pre>
<p>Now we can making some updates to our Cargo.toml file to add the Yew dependency.</p>
<pre><code class="language-rust ignore">[package]
name = &quot;example-yew-project&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;

[dependencies]
yew = &quot;0.19&quot;

</code></pre>
<p>Now in your main.rs let's create a simple component that renders the message <code>Hello, World!</code></p>
<pre><code class="language-rust ignore">use yew::prelude::*;

#[function_component(App)]
fn app() -&gt; Html {
    html! {
	&lt;h1&gt;{ &quot;Hello, World!&quot; }&lt;/h1&gt;
    }
}

fn main() {
    yew::start_app::&lt;App&gt;();
}
</code></pre>
<p>The <code>function_component()</code> macro creates a functional component with the name being the identifier 
name passed in as an argument. Function components are a simplivied version of a normal component.
They render what every they return. In our case we return the JSX like markup within the html 
macro.</p>
<p>A couple things to note about the html macro.</p>
<ul>
<li>Expressions must be wrapped in curly braces <code>{ }</code></li>
<li>There must only be one root node. You can wrap them in a fragment <code>&lt;&gt;&lt;/&gt;</code></li>
</ul>
<p>Before we can see what this looks like in the browser let's make sure we add <code>index.html</code> to 
the root of the project.</p>
<pre><code class="language-rust ignore">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;&lt;/head&gt;
    &lt;body&gt;

    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>If you notice we don't add anything to the children of the body element. This is because Yew will 
insert this data for us.</p>
<h3 id="viewing-the-page"><a class="header" href="#viewing-the-page">Viewing the page</a></h3>
<p>During development we need to be able to view the changes as we develop. This is where trunk comes 
in to help us. Run the following command to build and serve the application.</p>
<pre><code class="language-rust ignore">trunk serve 
</code></pre>
<p>From here you can navigate to your browser and try reaching the webpage with the default IP 
Address. <code>http://172.17.0.1:8080</code></p>
<p>Congradulations, you've built your first Yew app! </p>
<h3 id="hooks"><a class="header" href="#hooks">Hooks</a></h3>
<p>Hooks are Yew functions that allow you to tie into the lifecycle or state of a component. We will 
take a look at <a href="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">use_state</a>.</p>
<p><code>use_state</code> allows us to create and set a default value to be used within the component. The 
<code>UseStateHandle</code> it returns has a method that allows us to change the state value. This will in 
turn update the component.</p>
<p>Let's update our app method to test it out.</p>
<pre><code class="language-rust ignore">use yet::{Callback, function_component, html, use_state};

#[function_component(UseState)]
fn state() -&gt; Html {
    let counter = use_state(|| 0);
    let onClick = {
        let counter = counter.clone();
        Callback::from(move |_| counter.set(*counter + 1))
    };
    html! {
	&lt;div&gt;
	    &lt;button {onclick}&gt;{ &quot;Add one&quot; }&lt;/button&gt;
	    &lt;p&gt;{ &quot;Total: &quot; }{ *counter }&lt;/p&gt;
	&lt;/div&gt;
    }
}

</code></pre>
<p>Go ahead and <code>trunk serve</code>. You can see as you click the button, it adds one to the total.</p>
<h3 id="further-reading"><a class="header" href="#further-reading">Further Reading</a></h3>
<p>I'll highly reccomend following up with the Yew documentation.</p>
<ul>
<li><a href="https://yew.rs/docs/concepts/components/introduction">Components</a></li>
<li><a href="https://yew.rs/docs/concepts/html/introduction">HTML</a></li>
<li><a href="https://yew.rs/docs/concepts/function-components/introduction">Functional Components</a></li>
<li><a href="https://yew.rs/docs/concepts/agents/introduction">Agents</a></li>
<li><a href="https://yew.rs/docs/concepts/agents">Agents</a></li>
<li><a href="https://yew.rs/docs/concepts/context">Contexts</a></li>
<li><a href="https://yew.rs/docs/concepts/router">Router</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="component-library"><a class="header" href="#component-library">Component Library</a></h1>
<p>Now that we know how to create components, creating high quality complex user interfaces from 
scratch is a big challenge. This is where a Component Library can help.</p>
<p>At this time there is not a feature complete component library for Yew. Of the handful of existing
projects <a href="https://github.com/ctron/patternfly-yew">patternfly-yew</a> is the only one recently 
maintained.</p>
<h2 id="patternfly"><a class="header" href="#patternfly">Patternfly</a></h2>
<p>Patternfly is an open source design system to create consistent and usable applications
experiences. Pattternfly provides clear standards and guidelines to build efficently. It was 
designed as a React component library, however there is a community effort recreate the components
on an as needed basis.</p>
<p>Given the current state it would be best to start to get to know the library though the React 
documentation.</p>
<h2 id="components"><a class="header" href="#components">Components</a></h2>
<p>If we pull up the documentation for the <a href="https://www.patternfly.org/v4/components/alert">Alert</a>
component we're greeted to all of the examples. The different examples show the design of the 
component and how it can be used. </p>
<p>The <code>&lt;/&gt; JS</code> button on each example allows you to view what the code looks like. The bottom of the
page contains the props, which tells you about all of the properties to control the behavior of
the component.</p>
<h3 id="guidelines"><a class="header" href="#guidelines">Guidelines</a></h3>
<p>The <a href="https://www.patternfly.org/v4/components/alert/design-guidelines">Design Guidelines</a> exists 
for every component and provides details what the expected behaviors and how the user interacts 
with it.</p>
<h3 id="patternfly-rs"><a class="header" href="#patternfly-rs">patternfly-rs</a></h3>
<p>Let's look at the equivalent <a href="https://ctron.github.io/components/alert">Alert</a> component 
example. patternfly-rs uses the same styles sheets as the React library so the components should 
look identical. Like the upstream Patternfly documentation, it should contain the code snippit.</p>
<p>At the current stage there is not a lot of componenets and the example page does not meet parity
but should be a good place to start.</p>
<p>There are also more components completed than the ones on the example. A better resource for an up
to date list of components avalible the 
<a href="https://docs.rs/patternfly-yew/latest/patternfly_yew/index.html">Rust Docs</a> will be in sync with 
the upstream repository.</p>
<h2 id="using-patternfly-rs"><a class="header" href="#using-patternfly-rs">Using patternfly-rs</a></h2>
<p>patternfly-rs also includes a <a href="https://github.com/ctron/patternfly-yew">quickstart template</a> that
ships with the patternfly-rs documentaiton page. Normally from the github page you click the use
<code>Use this template</code> button, clone the repo and install everything with npm.</p>
<p>But the Overengineered CLI that comes pre-installed in the development environment. We can do all 
of this with one step with the following command, replacing <code>&lt;name&gt;</code> with the name of the project 
name. This clones the repo using the name as the name of the repo.</p>
<pre><code class="language-rust ignore">oecli pwa --new &lt;name&gt;
</code></pre>
<p>Just like our previous examples, run <code>trunk serve</code> and head to your browser to check it out. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="todo-app"><a class="header" href="#todo-app">Todo App</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
